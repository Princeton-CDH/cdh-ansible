---
scenario:
  name: default
driver:
  name: docker
platforms:    # use PUL's provided docker base image with ubuntu
  - name: instance
    image: "ghcr.io/pulibrary/pul_containers:jammy_multi"
    command: "/lib/systemd/systemd"
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
    privileged: true
    pre_build_image: true
provisioner:
  name: ansible
  log: true   # useful when testing; otherwise logs aren't shown
  config_options:
    # find role relative to test directory (broken in molecule v25)
    # solution from https://github.com/ansible/molecule/issues/4391#issuecomment-2686144513
    defaults:
      roles_path: "$MOLECULE_PROJECT_DIRECTORY/.."
verifier:
  name: ansible
lint: |       # standard config taken from molecule docs
  set -e
  yamllint .
  ansible-lint
