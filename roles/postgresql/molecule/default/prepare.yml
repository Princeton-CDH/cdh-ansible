---
- name: Prepare
  hosts: localhost
  gather_facts: false
  vars:
    python_version: "python3.6"
  vars_files:
    - ../../defaults/main.yml
  tasks:
    - name: create a postgres container for testing
      docker_container:
        name: test_postgres
        image: "postgres:{{ postgres_version }}"
        state: started
        container_default_behavior: no_defaults
        env:
          POSTGRES_USER: "{{ postgres_admin_user }}"
          POSTGRES_PASSWORD: "{{ postgres_admin_password }}"
        ports:
          - "{{ postgres_port }}:5432"
